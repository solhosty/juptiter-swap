"use strict"; function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { newObj[key] = obj[key]; } } } newObj.default = obj; return newObj; } } function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _chunkHFEILVW4js = require('../chunk-HFEILVW4.js');
require('../chunk-A355EMTI.js');
require('../chunk-74ANAXXV.js');
require('../chunk-C3X3GVS5.js');
require('../chunk-UGHO4YHY.js');
require('../chunk-3ZYUOGD4.js');
require('../chunk-ZYSI4CYO.js');


var _chunkS6N5Y2X2js = require('../chunk-S6N5Y2X2.js');
require('../chunk-772SHZWX.js');
require('../chunk-S3PQ6OXS.js');
require('../chunk-WKB2GIFW.js');
require('../chunk-TBVE5N24.js');
require('../chunk-Y7A4QF6J.js');
require('../chunk-JC4IRQUL.js');

// ts/client/src/scripts/mb-add-spot-market.ts
var _anchor = require('@project-serum/anchor');
var _web3js = require('@solana/web3.js');
var _dotenv = require('dotenv'); var dotenv = _interopRequireWildcard(_dotenv);
var _fs = require('fs'); var _fs2 = _interopRequireDefault(_fs);
dotenv.config();
async function addSpotMarket() {
  const options = _anchor.AnchorProvider.defaultOptions();
  const connection = new (0, _web3js.Connection)(process.env.MB_CLUSTER_URL, options);
  const admin = _web3js.Keypair.fromSecretKey(
    Buffer.from(
      JSON.parse(_fs2.default.readFileSync(process.env.MB_PAYER_KEYPAIR, "utf-8"))
    )
  );
  const adminWallet = new (0, _anchor.Wallet)(admin);
  const adminProvider = new (0, _anchor.AnchorProvider)(connection, adminWallet, options);
  const client = await _chunkHFEILVW4js.MangoClient.connect(
    adminProvider,
    "mainnet-beta",
    _chunkS6N5Y2X2js.MANGO_V4_ID["mainnet-beta"]
  );
  console.log(`Admin ${admin.publicKey.toBase58()}`);
  const groupPk = "78b8f4cGCwmZ9ysPFMWLaLTkkaYnUjwMJYStWe5RTSSX";
  const group = await client.getGroup(new (0, _web3js.PublicKey)(groupPk));
  console.log(`Found group ${group.publicKey.toBase58()}`);
  const eth_openbook_mkt = "FZxi3yWkE5mMjyaZj6utmYL54QQYfMCKMcLaQZq4UwnA";
  const eth_mint = "7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs";
  const usdc_mint = "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v";
  const signature = await client.serum3RegisterMarket(
    group,
    new (0, _web3js.PublicKey)(eth_openbook_mkt),
    group.getFirstBankByMint(new (0, _web3js.PublicKey)(eth_mint)),
    group.getFirstBankByMint(new (0, _web3js.PublicKey)(usdc_mint)),
    1,
    // market index
    "ETH/USDC"
  );
  console.log("Tx Successful:", signature);
  process.exit();
}
async function main() {
  await addSpotMarket();
}
main();
//# sourceMappingURL=mb-add-spot-market.js.map