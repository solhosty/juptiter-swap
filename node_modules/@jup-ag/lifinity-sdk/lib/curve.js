'use strict';(function(_0x378834,_0x202641){const _0x5f57af=a0_0x5829,_0x3a7835=_0x378834();while(!![]){try{const _0x1a595a=parseInt(_0x5f57af(0xa0))/0x1*(parseInt(_0x5f57af(0xa3))/0x2)+parseInt(_0x5f57af(0xa5))/0x3+parseInt(_0x5f57af(0xa8))/0x4*(parseInt(_0x5f57af(0xaa))/0x5)+-parseInt(_0x5f57af(0xa6))/0x6+-parseInt(_0x5f57af(0xa1))/0x7+parseInt(_0x5f57af(0xa4))/0x8*(parseInt(_0x5f57af(0xa7))/0x9)+parseInt(_0x5f57af(0xa9))/0xa*(parseInt(_0x5f57af(0xa2))/0xb);if(_0x1a595a===_0x202641)break;else _0x3a7835['push'](_0x3a7835['shift']());}catch(_0x485b1b){_0x3a7835['push'](_0x3a7835['shift']());}}}(a0_0xf08b,0xa53e9));var __importDefault=this&&this['__importDefault']||function(_0x1b1b41){return _0x1b1b41&&_0x1b1b41['__esModule']?_0x1b1b41:{'default':_0x1b1b41};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['getCurveAmount']=exports['TradeDirection']=void 0x0;const decimal_js_1=__importDefault(require('decimal.js'));exports['TradeDirection']={'AtoB':'AtoB','BtoA':'BtoA'};function getCurveAmount(_0x5e6e87,_0x4268e9,_0x71f688,_0x3d5f7b,_0x4fc2c6,_0x28edb2,_0x35d77f,_0x50f518,_0x1c7a04,_0x415aa9){let _0x16764b=new decimal_js_1['default'](0x0),_0x104754=new decimal_js_1['default'](0x0),_0x4288bd=_0x5e6e87['times'](_0x3d5f7b['tradeFeeNumerator'])['div'](_0x3d5f7b['tradeFeeDenominator']),_0x19bd4b=_0x5e6e87['times'](_0x3d5f7b['ownerTradeFeeNumerator'])['div'](_0x3d5f7b['ownerTradeFeeDenominator']);!_0x4288bd['isZero']()&&_0x4288bd['lt'](0x1)&&(_0x4288bd=new decimal_js_1['default'](0x1));!_0x19bd4b['isZero']()&&_0x19bd4b['lt'](0x1)&&(_0x19bd4b=new decimal_js_1['default'](0x1));const _0x4e7561=_0x4288bd['plus'](_0x19bd4b),_0x56bce5=_0x3d5f7b['tradeFeeNumerator']['div'](_0x3d5f7b['tradeFeeDenominator'])['plus'](_0x3d5f7b['ownerTradeFeeNumerator']['div'](_0x3d5f7b['ownerTradeFeeDenominator'])),_0x26e40b=_0x5e6e87['minus'](_0x4e7561),_0xf7b093=new decimal_js_1['default'](0xa),_0x1edc52=_0xf7b093['pow'](_0x71f688['baseDecimals']);if(_0x71f688['freezeTrade']===0x1)throw new Error('ProgramIsFrozen');if(!_0x50f518['status']['eq'](0x1))throw new Error('InvalidPythStatus');if(_0x4268e9-_0x50f518['publishSlot']['toNumber']()>_0x35d77f['pythSlotLimit']['toNumber']())throw new Error('InvalidPythSlot');let _0x3a0832=_0x50f518['confidence']['div'](_0x50f518['price']);if(_0x3a0832['gt'](_0x35d77f['pythConfidenceLimit']['div'](_0x35d77f['configDenominator'])))throw new Error('InvalidPythConfidence');let _0x15f4bc=_0x50f518['price'];if(_0x1c7a04){if(!_0x1c7a04['status']['eq'](0x1))throw new Error('InvalidPythPcStatus');if(_0x4268e9-_0x1c7a04['publishSlot']['toNumber']()>_0x35d77f['pythSlotLimit']['toNumber']())throw new Error('InvalidPythPcSlot');let _0x16cdbb=_0x1c7a04['confidence']['div'](_0x1c7a04['price']);if(_0x16cdbb['gt'](_0x35d77f['pythConfidenceLimit']['div'](_0x35d77f['configDenominator'])))throw new Error('InvalidPythPcConfidence');_0x15f4bc=_0x15f4bc['times'](_0xf7b093['pow'](Math['abs'](_0x1c7a04['exponent'])))['div'](_0x1c7a04['price']);}let _0x45240d=new decimal_js_1['default'](0x0);getAbs(_0x15f4bc['div'](_0x35d77f['lastPrice'])['minus'](0x1))['gt'](_0x35d77f['adjustRatio']['div'](_0x35d77f['configDenominator']))?_0x45240d=_0x15f4bc:_0x45240d=_0x35d77f['lastPrice'];;if(_0x35d77f['oracleStatus']['eq'](0x1)&&_0x415aa9===exports['TradeDirection']['AtoB'])throw new Error('OracleConfidence');else{if(_0x35d77f['oracleStatus']['eq'](0x2)&&_0x415aa9===exports['TradeDirection']['BtoA'])throw new Error('OracleConfidence');}const _0x59b5d7=_0x35d77f['lastBalancedPrice'],_0x41c2e3=_0x35d77f['coefficientUp'],_0x377e13=_0x35d77f['coefficientDown'];if(_0x71f688['curveType']===0x0){const {destinationAmountSwapped:_0x441996,poolPriceImpact:_0x5bf099}=constantCurve(_0x26e40b,_0x45240d,_0x59b5d7,_0x1edc52,_0x41c2e3,_0x377e13,_0x4fc2c6,_0x28edb2,_0x35d77f,_0x415aa9);_0x16764b=_0x441996,_0x104754=_0x5bf099;}else{if(_0x71f688['curveType']===0x1){const {destinationAmountSwapped:_0x5de9ac,poolPriceImpact:_0x246990}=stableCurve(_0x26e40b,_0x45240d,_0x59b5d7,_0x1edc52,_0x41c2e3,_0x377e13,_0x4fc2c6,_0x28edb2,_0x35d77f,_0x415aa9);_0x16764b=_0x5de9ac,_0x104754=_0x246990;}}if(_0x16764b['lt'](0x1))throw new Error('ZeroAmountOut');if(_0x415aa9===exports['TradeDirection']['AtoB']&&_0x16764b['gte'](_0x28edb2))throw new Error('ExceedPoolBalance');else{if(_0x415aa9===exports['TradeDirection']['BtoA']&&_0x16764b['gte'](_0x4fc2c6))throw new Error('ExceedPoolBalance');}return{'amountSwapped':_0x16764b,'priceImpact':_0x104754,'fee':_0x4e7561,'feePercent':_0x56bce5};}exports['getCurveAmount']=getCurveAmount;function constantCurve(_0x10896e,_0x483013,_0x28f9bc,_0x498b8f,_0x988ff3,_0x4033d3,_0xff55e8,_0x280f47,_0x4491a4,_0x1d2dd9){let _0x34aa12=new decimal_js_1['default'](0x0),_0x1fae48=new decimal_js_1['default'](0x0),_0x1f2b93=_0xff55e8['times'](_0x4491a4['concentrationRatio']),_0x98a9b8=_0x280f47['times'](_0x4491a4['concentrationRatio']),_0x49c759=_0x1f2b93['times'](_0x483013)['div'](_0x498b8f)['floor']();switch(_0x1d2dd9){case exports['TradeDirection']['AtoB']:{if(_0x483013['gt'](_0x28f9bc)&&_0x49c759['gt'](_0x98a9b8)){let _0x3251a9=_0x98a9b8['div'](_0x49c759),_0x574c41=_0x3251a9['pow'](_0x4033d3);_0x1f2b93=_0x1f2b93['times'](_0x574c41)['floor'](),_0x98a9b8=_0x98a9b8['times'](_0x574c41)['floor']();}else{if(_0x28f9bc['gt'](_0x483013)&&_0x98a9b8['gt'](_0x49c759)){let _0xf171e7=_0x98a9b8['div'](_0x49c759),_0x382457=_0xf171e7['pow'](_0x988ff3);_0x1f2b93=_0x1f2b93['times'](_0x382457)['floor'](),_0x98a9b8=_0x98a9b8['times'](_0x382457)['floor']();}else{if(_0x49c759['gt'](_0x98a9b8)){let _0x29ee59=_0x98a9b8['div'](_0x49c759),_0xbd93d=_0x29ee59['pow'](_0x4033d3);_0x1f2b93=_0x1f2b93['times'](_0xbd93d)['floor'](),_0x98a9b8=_0x98a9b8['times'](_0xbd93d)['floor']();}else;}}let _0x4f8dac=new decimal_js_1['default'](Math['sqrt'](_0x1f2b93['toNumber']())),_0x3473d1=new decimal_js_1['default'](Math['sqrt'](_0x98a9b8['toNumber']())),_0x3c752d=new decimal_js_1['default'](Math['sqrt'](_0x483013['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0x498b8f['toNumber']()))),_0x32a55f=_0x4f8dac['times'](_0x3473d1);_0x1f2b93=_0x32a55f['div'](_0x3c752d)['floor'](),_0x98a9b8=_0x32a55f['times'](_0x3c752d)['floor']();let _0x2a9090=_0x1f2b93['times'](_0x98a9b8),_0x32109a=_0x1f2b93['plus'](_0x10896e),{q:_0x3829b7,r:_0x516479}=checkedCeilDiv(_0x2a9090,_0x32109a),_0x86e553=_0x3829b7['floor']();_0x32109a=_0x516479['floor'](),_0x34aa12=_0x98a9b8['minus'](_0x86e553)['floor']();const _0x36a7f0=_0x98a9b8['div'](_0x1f2b93),_0xd30aff=_0x98a9b8['minus'](_0x34aa12)['div'](_0x1f2b93['plus'](_0x10896e));_0x1fae48=_0x36a7f0['minus'](_0xd30aff)['div'](_0x36a7f0);break;}case exports['TradeDirection']['BtoA']:{if(_0x483013['gt'](_0x28f9bc)&&_0x49c759['gt'](_0x98a9b8)){let _0x381157=_0x49c759['div'](_0x98a9b8),_0x42de63=_0x381157['pow'](_0x988ff3);_0x1f2b93=_0x1f2b93['times'](_0x42de63)['floor'](),_0x98a9b8=_0x98a9b8['times'](_0x42de63)['floor']();}else{if(_0x28f9bc['gt'](_0x483013)&&_0x98a9b8['gt'](_0x49c759)){let _0x25bd11=_0x49c759['div'](_0x98a9b8),_0x3da4ae=_0x25bd11['pow'](_0x4033d3);_0x1f2b93=_0x1f2b93['times'](_0x3da4ae)['floor'](),_0x98a9b8=_0x98a9b8['times'](_0x3da4ae)['floor']();}else{if(_0x49c759['gt'](_0x98a9b8));else{let _0x17e623=_0x49c759['div'](_0x98a9b8),_0x4c3679=_0x17e623['pow'](_0x4033d3);_0x1f2b93=_0x1f2b93['times'](_0x4c3679)['floor'](),_0x98a9b8=_0x98a9b8['times'](_0x4c3679)['floor']();}}}let _0x8f76cb=new decimal_js_1['default'](Math['sqrt'](_0x1f2b93['toNumber']())),_0x2a8b6e=new decimal_js_1['default'](Math['sqrt'](_0x98a9b8['toNumber']())),_0x40960e=new decimal_js_1['default'](Math['sqrt'](_0x483013['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0x498b8f['toNumber']()))),_0x5deee0=_0x8f76cb['times'](_0x2a8b6e);_0x1f2b93=_0x5deee0['div'](_0x40960e)['floor'](),_0x98a9b8=_0x5deee0['times'](_0x40960e)['floor']();let _0x47af26=_0x1f2b93['times'](_0x98a9b8),_0x40ae79=_0x98a9b8['plus'](_0x10896e),{q:_0x132bc4,r:_0x4c3d0b}=checkedCeilDiv(_0x47af26,_0x40ae79),_0xc279b1=_0x132bc4['floor']();_0x40ae79=_0x4c3d0b['floor'](),_0x34aa12=_0x1f2b93['minus'](_0xc279b1)['floor']();const _0x9a66a0=_0x98a9b8['div'](_0x1f2b93),_0x61184d=_0x98a9b8['plus'](_0x10896e)['div'](_0x1f2b93['minus'](_0x34aa12));_0x1fae48=_0x61184d['minus'](_0x9a66a0)['div'](_0x61184d);break;}}return{'destinationAmountSwapped':_0x34aa12,'poolPriceImpact':_0x1fae48};};function stableCurve(_0xd263f4,_0x13c612,_0xf45a00,_0x1c9afc,_0x4c345b,_0xdce478,_0x513977,_0xb24306,_0x3ee274,_0x39960c){let _0x142522=new decimal_js_1['default'](0x0),_0x52272d=new decimal_js_1['default'](0x0),_0x376db6=_0x513977,_0x43533c=_0xb24306,_0xa8895d=_0x376db6['times'](_0x13c612)['div'](_0x1c9afc);switch(_0x39960c){case exports['TradeDirection']['AtoB']:{if(_0x13c612['gt'](_0xf45a00)&&_0xa8895d['gt'](_0x43533c)){let _0x286176=_0x43533c['div'](_0xa8895d),_0x73def7=_0x286176['pow'](_0xdce478);_0x376db6=_0x376db6['times'](_0x73def7),_0x43533c=_0x43533c['times'](_0x73def7);}else{if(_0xf45a00['gt'](_0x13c612)&&_0x43533c['gt'](_0xa8895d)){let _0xfccf8a=_0x43533c['div'](_0xa8895d),_0x4a49af=_0xfccf8a['pow'](_0x4c345b);_0x376db6=_0x376db6['times'](_0x4a49af),_0x43533c=_0x43533c['times'](_0x4a49af);}else{if(_0xa8895d['gt'](_0x43533c)){let _0x29dc76=_0x43533c['div'](_0xa8895d),_0x5f21e3=_0x29dc76['pow'](_0xdce478);_0x376db6=_0x376db6['times'](_0x5f21e3),_0x43533c=_0x43533c['times'](_0x5f21e3);}else;}}_0x376db6=_0x376db6['times'](_0x3ee274['concentrationRatio']),_0x43533c=_0x43533c['times'](_0x3ee274['concentrationRatio']);let _0x5d3a8d=new decimal_js_1['default'](Math['sqrt'](_0x376db6['toNumber']())),_0x4983d3=new decimal_js_1['default'](Math['sqrt'](_0x43533c['toNumber']())),_0x97f5b5=new decimal_js_1['default'](Math['sqrt'](_0x13c612['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0x1c9afc['toNumber']()))),_0x50b869=_0x5d3a8d['times'](_0x4983d3);_0x376db6=_0x50b869['div'](_0x97f5b5),_0x43533c=_0x50b869['times'](_0x97f5b5);let _0x57662f=_0x376db6['times'](_0x43533c),_0x2cddcc=_0x376db6['plus'](_0xd263f4),{q:_0x187345,r:_0x31c651}=checkedCeilDiv(_0x57662f,_0x2cddcc),_0x2d1c5a=_0x187345;_0x2cddcc=_0x31c651,_0x142522=_0x43533c['minus'](_0x2d1c5a);const _0x12d57b=_0x43533c['div'](_0x376db6),_0x6cae11=_0x43533c['minus'](_0x142522)['div'](_0x376db6['plus'](_0xd263f4));_0x52272d=_0x12d57b['minus'](_0x6cae11)['div'](_0x6cae11);break;}case exports['TradeDirection']['BtoA']:{if(_0x13c612['gt'](_0xf45a00)&&_0xa8895d['gt'](_0x43533c)){let _0xde88a6=_0xa8895d['div'](_0x43533c),_0x2c22bb=_0xde88a6['pow'](_0x4c345b);_0x376db6=_0x376db6['times'](_0x2c22bb),_0x43533c=_0x43533c['times'](_0x2c22bb);}else{if(_0xf45a00['gt'](_0x13c612)&&_0x43533c['gt'](_0xa8895d)){let _0x1f7440=_0xa8895d['div'](_0x43533c),_0x3581fa=_0x1f7440['pow'](_0xdce478);_0x376db6=_0x376db6['times'](_0x3581fa),_0x43533c=_0x43533c['times'](_0x3581fa);}else{if(_0xa8895d['gt'](_0x43533c));else{let _0x22a80b=_0xa8895d['div'](_0x43533c),_0x419ca3=_0x22a80b['pow'](_0xdce478);_0x376db6=_0x376db6['times'](_0x419ca3),_0x43533c=_0x43533c['times'](_0x419ca3);}}}_0x376db6=_0x376db6['times'](_0x3ee274['concentrationRatio']),_0x43533c=_0x43533c['times'](_0x3ee274['concentrationRatio']);let _0x5e919c=new decimal_js_1['default'](Math['sqrt'](_0x376db6['toNumber']())),_0x597fcc=new decimal_js_1['default'](Math['sqrt'](_0x43533c['toNumber']())),_0x369ad6=new decimal_js_1['default'](Math['sqrt'](_0x13c612['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0x1c9afc['toNumber']()))),_0x17606b=_0x5e919c['times'](_0x597fcc);_0x376db6=_0x17606b['div'](_0x369ad6),_0x43533c=_0x17606b['times'](_0x369ad6);let _0x7be47b=_0x376db6['times'](_0x43533c),_0x156299=_0x43533c['plus'](_0xd263f4),{q:_0x2834ab,r:_0x59b857}=checkedCeilDiv(_0x7be47b,_0x156299),_0x3a356d=_0x2834ab;_0x156299=_0x59b857,_0x142522=_0x376db6['minus'](_0x3a356d);const _0x166d8d=_0x43533c['div'](_0x376db6),_0x3906b6=_0x43533c['plus'](_0xd263f4)['div'](_0x376db6['minus'](_0x142522));_0x52272d=_0x3906b6['minus'](_0x166d8d)['div'](_0x166d8d);break;}}return _0x142522=new decimal_js_1['default'](Math['floor'](_0x142522['toNumber']())),{'destinationAmountSwapped':_0x142522,'poolPriceImpact':_0x52272d};}function getAbs(_0x4cceb9){return _0x4cceb9['toNumber']()<0x0?_0x4cceb9['times'](-0x1):_0x4cceb9;};function a0_0x5829(_0x5b1f39,_0x2ac628){const _0xf08bf5=a0_0xf08b();return a0_0x5829=function(_0x582965,_0x10bfa9){_0x582965=_0x582965-0xa0;let _0x171b5b=_0xf08bf5[_0x582965];return _0x171b5b;},a0_0x5829(_0x5b1f39,_0x2ac628);}function a0_0xf08b(){const _0x331772=['6821460xnbaXB','834685plOpLf','697IZStSD','8099637kMyemb','11ZPZkHL','1060VcigxO','328FJIDEQ','1483176RpEDjt','3506280xacanq','8271OAdiqX','20fDUZTB'];a0_0xf08b=function(){return _0x331772;};return a0_0xf08b();}function checkedCeilDiv(_0x288816,_0x4dfa26){let _0x5111f1=_0x4dfa26,_0x3b3acf=_0x288816['div'](_0x5111f1);if(_0x3b3acf['eq'](0x0))return{'q':new decimal_js_1['default'](0x0),'r':new decimal_js_1['default'](0x0)};let _0x13343b=_0x288816['mod'](_0x4dfa26);if(_0x13343b['gt'](0x0)){_0x3b3acf=_0x3b3acf['plus'](0x1),_0x5111f1=_0x288816['div'](_0x3b3acf);let _0x4efcd4=_0x288816['mod'](_0x3b3acf);_0x4efcd4['gt'](0x0)&&(_0x5111f1=_0x5111f1['plus'](0x1));}return{'q':_0x3b3acf,'r':_0x5111f1};}